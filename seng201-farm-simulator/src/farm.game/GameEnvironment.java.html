<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../../../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../../../jacoco-resources/report.gif" type="image/gif"/><title>GameEnvironment.java</title><link rel="stylesheet" href="../../../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../../../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../../../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../../../index.html" class="el_report">src (25/05/2020 2:19:44 PM)</a> &gt; <a href="../../index.html" class="el_group">seng201-farm-simulator</a> &gt; <a href="../index.html" class="el_bundle">src</a> &gt; <a href="index.source.html" class="el_package">farm.game</a> &gt; <span class="el_source">GameEnvironment.java</span></div><h1>GameEnvironment.java</h1><pre class="source lang-java linenums">package farm.game;

import java.text.DecimalFormat;
import java.util.ArrayList;
import java.util.Scanner;

/**
 * This abstract class implements the game environment which contains all of the
 * game logic. This environment implements all of the functions required to play
 * the farm simulation game, whilst keeping track of a farm and the elapsed
 * days. The game instantiates all classes used.
 * 
 * @author Megan Steenkamp
 * @version 1.0
 */

public class GameEnvironment {
<span class="nc" id="L18">	Scanner in = new Scanner(System.in);</span>
	public float initialBalance;
	private int numDayActions;
	private int daysTotal;
	private int currentDay;
	private Farm farm;
<span class="nc" id="L24">	private GeneralStore generalStore = new GeneralStore();</span>

	/**
	 * Initialize Game Environment
	 */
<span class="nc" id="L29">	public GameEnvironment() {</span>
<span class="nc" id="L30">		this.currentDay = 0;</span>
<span class="nc" id="L31">	}</span>

//===================================================== GAME INITIALIZATION =====================================================

	/**
	 * Create a Farmer object.
	 * 
	 * @param name Name of farmer.
	 * @param age  Age of farmer.
	 * @return The farmer object.
	 */
	public Farmer createFarmer(String name, int age) {
<span class="nc" id="L43">		Farmer farmer = new Farmer(name, age);</span>
<span class="nc" id="L44">		return farmer;</span>
	}
	
	public String getFarmDescription(String farmType) {
<span class="nc" id="L48">		String str = &quot;&quot;;</span>
<span class="nc bnc" id="L49" title="All 5 branches missed.">		switch(farmType) {</span>
		case &quot;Africa&quot;:
<span class="nc" id="L51">			str += AfricanFarm.getTypeDescription();</span>
<span class="nc" id="L52">			break;</span>
		case &quot;Mediterranean&quot;:
<span class="nc" id="L54">			str += MediterraneanFarm.getTypeDescription();</span>
<span class="nc" id="L55">			break;</span>
		case &quot;New Zealand&quot;:
<span class="nc" id="L57">			str += NewZealandFarm.getTypeDescription();</span>
<span class="nc" id="L58">			break;</span>
		case &quot;North Korea&quot;:
<span class="nc" id="L60">			str += NorthKoreanFarm.getTypeDescription();</span>
			break;
		}
<span class="nc" id="L63">		return str;</span>
	}

	/**
	 * Returns the description of how crop growth delay bonuses and animal happiness
	 * bonuses work in the game.
	 * 
	 * @return A description of crop growth and animal happiness bonuses for a farm.
	 */
	public static String getBonusesDescription() {
<span class="nc" id="L73">		return &quot;Crop growth delay will delay the growth of all crops by a given number of days. A crop can only be harvested for money once&quot;</span>
				+ &quot; it is fully grown. If this delay is negative, it means your crops will grow faster.\n\nAn animal happiness bonus adds to the happiness all animals, which&quot;
				+ &quot; contributes to the amount of money earned at the end of a day.\n\nThese bonuses are applied on purchase of the crop or animal.&quot;;
	}

	/**
	 * Returns a welcome message for a player at the beginning of a game.
	 * 
	 * @return A welcome message for the player.
	 */
	public String getWelcomeMessage() {
<span class="nc" id="L84">		return &quot;Welcome to your new farm, &quot; + this.farm.getFarmer().getName()</span>
<span class="nc" id="L85">				+ &quot;. It is a beautiful day to get to work on '&quot; + this.farm.getName()</span>
<span class="nc" id="L86">				+ &quot;'.\nWe suggest visiting the General Store.\nA farm isn't much fun without crops or animals.&quot;;</span>
	}

	/**
	 * Returns the main instructions on how to play the farm simulation game.
	 * 
	 * @return Instructions on how to play the farm simulation game.
	 */
	public String getGameInstructions() {
<span class="nc" id="L95">		return &quot;Welcome to 'Mowing Before Hoeing'.\n\n&quot;</span>
				+ &quot;The goal of this game is to maximise profit and asset aquisition whilst keeping your animals happy and healthy.\n\n&quot;
				+ &quot;Money can be earned during the day from harvesting crops.\nAt the end of each day bonus money is given based &quot;
				+ &quot;on the health and happiness of animals.\n\n&quot; + &quot;Your final score is based on game duration, money, number of crops &quot;
				+ &quot;and animals, and animal status.\n\n&quot;
				+ &quot;Let's set up the farm before we get to work!&quot;;
	}

	/**
	 * Initialize the game.
	 * 
	 * @param numDays    Chosen duration of the game in days.
	 * @param farmType   The name of the selected farm subclass.
	 * @param farmerName The name of the farmer.
	 * @param farmerAge  The age of the farmer.
	 * @param farmName   The name of the farm.
	 */
	public void setUpGame(int numDays, String farmType, String farmerName, int farmerAge, String farmName) {
<span class="nc" id="L113">		setNumDays(numDays);</span>

<span class="nc bnc" id="L115" title="All 5 branches missed.">		switch (farmType) {</span>
		case &quot;North Korea&quot;:
<span class="nc" id="L117">			this.farm = new NorthKoreanFarm();</span>
<span class="nc" id="L118">			break;</span>
		case &quot;Africa&quot;:
<span class="nc" id="L120">			this.farm = new AfricanFarm();</span>
<span class="nc" id="L121">			break;</span>
		case &quot;Mediterranean&quot;:
<span class="nc" id="L123">			this.farm = new MediterraneanFarm();</span>
<span class="nc" id="L124">			break;</span>
		case &quot;New Zealand&quot;:
<span class="nc" id="L126">			this.farm = new NewZealandFarm();</span>
			break;
		}
<span class="nc" id="L129">		this.initialBalance = this.farm.getBalance();</span>
<span class="nc" id="L130">		this.farm.setName(farmName);</span>
<span class="nc" id="L131">		this.farm.setFarmer(createFarmer(farmerName, farmerAge));</span>
<span class="nc" id="L132">		this.farm.getFarmer().setFarm(farm);</span>
<span class="nc" id="L133">	}</span>

//===================================================== DAY IMPLEMENTATION =====================================================	

	/**
	 * Begins a new day on the farm by incrementing the current day and resetting
	 * the allowed actions. Crop growth is also updated by one day.
	 */
	public void beginNewDay() {
<span class="nc" id="L142">		this.currentDay++;</span>
<span class="nc" id="L143">		this.numDayActions = 2;</span>

		// Update crop growth by 1 day
<span class="nc bnc" id="L146" title="All 2 branches missed.">		for (FarmItem c : this.farm.getCrops()) {</span>
<span class="nc" id="L147">			((Crop) c).updateCropGrowth(1);</span>
		}
<span class="nc" id="L149">	}</span>

	/**
	 * Returns a welcome message for the beginning of a day.
	 * 
	 * @return A message to begin a new day on the farm.
	 */
	public String getDayWelcomeMessage() {
<span class="nc" id="L157">		return &quot;Welcome to day &quot; + currentDay + &quot; on '&quot; + this.farm.getName() + &quot;', &quot; + this.farm.getFarmer().getName()</span>
<span class="nc" id="L158">				+ &quot;.&quot;;</span>
	}

	/**
	 * Calculates a daily bonus for the farm depending on animal happiness and
	 * health and adds this to the balance of the farm. A description of the bonus
	 * earned is returned.
	 * 
	 * @return A String representation of the monetary bonus for the day.
	 */
	public String getDailyBonus() {
<span class="nc" id="L169">		DecimalFormat df = new DecimalFormat(&quot;#.00&quot;);</span>
<span class="nc" id="L170">		float bonus = 0;</span>
<span class="nc" id="L171">		String str = &quot;Daily Bonuses for today:\n\n&quot;;</span>

<span class="nc" id="L173">		ArrayList&lt;FarmItem&gt; animals = this.farm.getAnimals();</span>
<span class="nc bnc" id="L174" title="All 2 branches missed.">		for (FarmItem a : animals) {</span>
<span class="nc" id="L175">			float healthBonus = ((Animal) a).getHealth() * 5;</span>
<span class="nc" id="L176">			float happinessBonus = ((Animal) a).getHappiness() * 5;</span>
<span class="nc" id="L177">			str += &quot;Bonus from &quot; + ((Animal) a).getName() + &quot;: $&quot; + df.format(happinessBonus + healthBonus) + &quot;\n&quot;;</span>
<span class="nc" id="L178">			bonus += (happinessBonus + healthBonus);</span>
		}
<span class="nc bnc" id="L180" title="All 2 branches missed.">		if (bonus == 0) {</span>
<span class="nc" id="L181">			str += &quot;\nTotal bonus money: $0.00&quot;;</span>
<span class="nc" id="L182">		} else {</span>
<span class="nc" id="L183">			this.farm.addToBalance(bonus);</span>
<span class="nc" id="L184">			str += &quot;\nTotal bonus money: $&quot; + df.format(bonus);</span>
		}
<span class="nc" id="L186">		return str;</span>
	}

	/**
	 * Sets the number of days the game will last for.
	 * 
	 * @param days The number of days the game should last.
	 */
	public void setNumDays(int days) {
<span class="nc" id="L195">		this.daysTotal = days;</span>
<span class="nc" id="L196">	}</span>

	/**
	 * Returns the total number of days the game will last for.
	 * 
	 * @return Total game duration in days.
	 */
	public int getDaysTotal() {
<span class="nc" id="L204">		return this.daysTotal;</span>
	}

	/**
	 * Returns the number of 'days' the game has been played for.
	 * 
	 * @return The current day of the game.
	 */
	public int getCurrentDay() {
<span class="nc" id="L213">		return this.currentDay;</span>
	}

//===================================================== MAIN MENU =====================================================	

	/**
	 * Returns the status of the farm's crops and animals.
	 * 
	 * @return The status of the farm's crops and animals.
	 */
	public String getCropAndAnimalStatus() {
<span class="nc" id="L224">		return this.farm.getCropAndAnimalStatus();</span>
	}

	/**
	 * Returns the status of the farm which includes all set attributes, including
	 * the balance.
	 * 
	 * @return The status of the farm.
	 */
	public String getFarmStatus() {
<span class="nc" id="L234">		return this.farm.toString();</span>
	}

	/**
	 * Returns the number of actions that the player still has for the given day.
	 * 
	 * @return Number of allowed actions remaining.
	 */
	public int getNumActions() {
<span class="nc" id="L243">		return this.numDayActions;</span>
	}

	/**
	 * Moves to the next day of the game if the game is not finished. If the game is
	 * finished, the function will return false indicating that the game is
	 * completed.
	 * 
	 * @return Returns true if a new day has begun. Returns false if the game is
	 *         completed.
	 */
	public boolean moveToNextDay() {
<span class="nc bnc" id="L255" title="All 2 branches missed.">		if (this.currentDay &lt; this.daysTotal) {</span>
<span class="nc" id="L256">			beginNewDay();</span>
<span class="nc" id="L257">			return true;</span>
		} else {
<span class="nc" id="L259">			return false;</span>
		}
	}

//===================================================== FARMER ACTIONS =====================================================	

	/**
	 * Returns a description of the 'tend to crops' action, performed by a farmer.
	 * 
	 * @return The description of tending to crops.
	 */
	public String getCropTendingDescription() {
<span class="nc" id="L271">		return &quot;Tending to the crops speeds up their growing process by a small amount, decreasing the amount of time until they can be harvested.\n&quot;</span>
				+ &quot;Only one type of crop can be harvested at a time.\n&quot;
				+ &quot;An item or water can be used to tend to the crops.\n\n&quot; + &quot;You current own the following crops:\n&quot;
<span class="nc" id="L274">				+ this.farm.getCropStatus() + &quot;\n&quot; + &quot;Click yes to to pick which crop type and item.&quot;;</span>
	}

	/**
	 * Returns a description of the 'feed animals' action, performed by a farmer.
	 * 
	 * @return The description of feeding animals.
	 */
	public String getFeedingAnimalsDescription() {
<span class="nc" id="L283">		return &quot;Feeding your animals will increase their health.\n&quot; + &quot;A food item must be used to do this.\n\n&quot;</span>
				+ &quot;Click yes to pick the food to feed your animals with.&quot;;
	}

	/**
	 * Returns a description of the 'play with animals' action, performed by a
	 * farmer.
	 * 
	 * @return The description of playing with animals.
	 */
	public String getPlayWithAnimalsDescription() {
<span class="nc" id="L294">		return &quot;Playing with animals makes their happiness increase.\n&quot;</span>
				+ &quot;The happiness of all animals will increase by 1 point.\n\n&quot;
<span class="nc" id="L296">				+ &quot;Here is the status of your current animals:\n&quot; + this.farm.getAnimalStatus()</span>
<span class="nc" id="L297">				+ &quot;\nClick yes to play with the animals.&quot;;</span>
	}

	/**
	 * Returns a description of the 'harvest crops' action, performed by a farmer.
	 * 
	 * @return A description of harvesting crops.
	 */
	public String getHarvestCropsDescription() {
<span class="nc" id="L306">		return &quot;Any crops that have fully grown can be harvested for a money bonus.\n\n&quot;</span>
<span class="nc" id="L307">				+ &quot;Here are your current crops ready for harvest:\n&quot; + this.farm.getCropsReadyForHarvest()</span>
<span class="nc" id="L308">				+ &quot;\nClick yes to harvest these crops.&quot;;</span>
	}

	/**
	 * Returns a description of the 'tend to the farm land' action, performed by a
	 * farmer.
	 * 
	 * @return A description of tending to farmland.
	 */
	public String getTendToFarmLandDescription() {
<span class="nc" id="L318">		return &quot;Tending to the farm's land keeps the farm tidy and well maintained.\n&quot;</span>
				+ &quot;This allows for more crops to be grown and keeps animals happier for longer.\n\n&quot;
<span class="nc" id="L320">				+ &quot;Here is the status of your current animals:\n&quot; + this.farm.getAnimalStatus() + &quot;\nYou have &quot;</span>
<span class="nc" id="L321">				+ this.farm.getNumAvailableCrops() + &quot; available crop plots.\n\n&quot;</span>
<span class="nc" id="L322">				+ &quot;Click yes to tend to the land, adding 1 point to the happiness of all of your animals, and adding 1 available crop plot.&quot;;</span>
	}

	/**
	 * Returns true if a farmer is able to tend to the crops. This will be true if
	 * there are crops on the farm.
	 * 
	 * @return True if the crops can be tended to. Else, false.
	 */
	public boolean canTendToCrops() {
<span class="nc bnc" id="L332" title="All 2 branches missed.">		if (this.farm.getCrops().size() &gt; 0) {</span>
<span class="nc" id="L333">			return true;</span>
		}
<span class="nc" id="L335">		return false;</span>
	}

	/**
	 * Returns true is a farmer can feed the animals. This will be true if there are
	 * animals on the farm and the farmer has some food items.
	 * 
	 * @return True if the animals can be fed. Else, false.
	 */
	public boolean canFeedAnimals() {
<span class="nc bnc" id="L345" title="All 4 branches missed.">		if (this.farm.getAnimals().size() &gt; 0 &amp;&amp; getFoodItems().size() &gt; 0) {</span>
<span class="nc" id="L346">			return true;</span>
		}
<span class="nc" id="L348">		return false;</span>
	}

	/**
	 * Returns true if a farmer can play with the animals. This requires the farm to
	 * have animals.
	 * 
	 * @return True if there are animals on the farm. Else, false.
	 */
	public boolean canPlayWithAnimals() {
<span class="nc bnc" id="L358" title="All 2 branches missed.">		if (this.farm.getAnimals().size() &gt; 0) {</span>
<span class="nc" id="L359">			return true;</span>
		}
<span class="nc" id="L361">		return false;</span>
	}

	/**
	 * Returns true if a farmer has crops that are ready to be harvested.
	 * 
	 * @return True if there are crops ready to harvest. Else, false.
	 */
	public boolean canHarvestCrops() {
<span class="nc bnc" id="L370" title="All 2 branches missed.">		for (FarmItem crop : this.farm.getCrops()) {</span>
<span class="nc" id="L371">			Crop c = (Crop) crop;</span>
<span class="nc bnc" id="L372" title="All 2 branches missed.">			if (c.getTimeUntilHarvest() == 0) {</span>
<span class="nc" id="L373">				return true;</span>
			}
		}
<span class="nc" id="L376">		return false;</span>
	}

	/**
	 * Returns food items owned by the farmer.
	 * 
	 * @return Food items owned by the farmer.
	 */
	public ArrayList&lt;FarmItem&gt; getFoodItems() {
<span class="nc" id="L385">		ArrayList&lt;FarmItem&gt; food = new ArrayList&lt;FarmItem&gt;();</span>
<span class="nc bnc" id="L386" title="All 2 branches missed.">		for (FarmItem i : this.farm.getFarmer().getItems()) {</span>
<span class="nc bnc" id="L387" title="All 2 branches missed.">			if (((Item) i).getAnimalHealthFactor() != 0) {</span>
<span class="nc" id="L388">				food.add(i);</span>
			}
		}
<span class="nc" id="L391">		return food;</span>
	}

	/**
	 * Returns items used for tending to crops owned by the farmer.
	 * 
	 * @return Items used for tending to crops owned by the farmer.
	 */
	public ArrayList&lt;FarmItem&gt; getToolItems() {
<span class="nc" id="L400">		ArrayList&lt;FarmItem&gt; tools = new ArrayList&lt;FarmItem&gt;();</span>
<span class="nc bnc" id="L401" title="All 2 branches missed.">		for (FarmItem i : this.farm.getFarmer().getItems()) {</span>
<span class="nc bnc" id="L402" title="All 2 branches missed.">			if (((Item) i).getCropGrowthFactor() != 0) {</span>
<span class="nc" id="L403">				tools.add(i);</span>
			}
		}
<span class="nc" id="L406">		return tools;</span>
	}

	/**
	 * Returns all crops on the farm.
	 * 
	 * @return Crops on the farm.
	 */
	public ArrayList&lt;FarmItem&gt; getCrops() {
<span class="nc" id="L415">		return this.farm.getCrops();</span>
	}

	/**
	 * Implements the 'tend to crops' action using an item.
	 * 
	 * @param cropId The type ID of the crop to be tended to.
	 * @param itemId The type ID of the item to be used for tending to the crops.
	 * @return The updated status of the crops.
	 */
	public String tendToCrops(int cropId, int itemId) {
<span class="nc" id="L426">		String str = &quot;&quot;;</span>

		// Remove item to use
<span class="nc" id="L429">		Item item = (Item) this.farm.getFarmer().removeItem(itemId);</span>
<span class="nc" id="L430">		this.farm.getFarmer().feedAnimals(item);</span>

<span class="nc" id="L432">		this.farm.getFarmer().tendToCrop(cropId, item);</span>
<span class="nc" id="L433">		str += &quot;Good job on a hard day's work on the crops.\n&quot; + &quot;Here is the updated status of the crops:\n&quot;;</span>
<span class="nc" id="L434">		str += this.farm.getCropStatus();</span>

<span class="nc" id="L436">		this.numDayActions -= 1;</span>
<span class="nc" id="L437">		return str;</span>
	}

	/**
	 * Implements the 'tend to crops' action using the free option, 'water'. This
	 * deducts one day off the required crop growth.
	 * 
	 * @param cropId The type ID of the crop to be tended to.
	 * @return The updated status of the crops.
	 */
	public String tendToCrops(int cropId) {
<span class="nc" id="L448">		String str = &quot;&quot;;</span>

<span class="nc" id="L450">		this.farm.getFarmer().tendToCrop(cropId);</span>
<span class="nc" id="L451">		str += &quot;Good job on a hard day's work on the crops.\n&quot; + &quot;Here is the updated status of the crops:\n&quot;;</span>
<span class="nc" id="L452">		str += this.farm.getCropStatus();</span>

<span class="nc" id="L454">		this.numDayActions -= 1;</span>
<span class="nc" id="L455">		return str;</span>
	}

	/**
	 * Implements the 'feed animals' action using a food item. This improves the
	 * health of all animals.
	 * 
	 * @param itemId The Type ID of the food item to use to feed the animals.
	 * @return The updated status of all animals.
	 */
	public String feedAnimals(int itemId) {
<span class="nc" id="L466">		String str = &quot;&quot;;</span>

		// Remove item to use
<span class="nc" id="L469">		Item item = (Item) this.farm.getFarmer().removeItem(itemId);</span>
<span class="nc" id="L470">		this.farm.getFarmer().feedAnimals(item);</span>

		// Return updated Animal details
<span class="nc" id="L473">		str += &quot;Your animals have been successfully fed. Here is their updated status:\n&quot;;</span>
<span class="nc" id="L474">		str += this.farm.getAnimalStatus();</span>

<span class="nc" id="L476">		this.numDayActions -= 1;</span>
<span class="nc" id="L477">		return str;</span>
	}

	/**
	 * Implements the 'play with animals' action which improves the happiness of
	 * animals.
	 * 
	 * @return The updated status of all animals.
	 */
	public String playWithAnimals() {
<span class="nc" id="L487">		String str = &quot;&quot;;</span>
<span class="nc" id="L488">		this.farm.getFarmer().playWithAnimals();</span>
<span class="nc" id="L489">		str += &quot;Your animals love spending time with you! Here is their updated status:\n&quot;;</span>
<span class="nc" id="L490">		str += this.farm.getAnimalStatus();</span>

<span class="nc" id="L492">		this.numDayActions -= 1;</span>
<span class="nc" id="L493">		return str;</span>
	}

	/**
	 * Implements the 'harvest crops' action which adds the selling price of
	 * harvested crops to the balance of the farm, and frees a crop plot up for
	 * every harvested crop. Harvested crops are removed from the crop list.
	 * 
	 * @return An updated status of the crops.
	 */
	public String harvestCrops() {
<span class="nc" id="L504">		String str = &quot;&quot;;</span>
<span class="nc" id="L505">		float moneyEarned = this.farm.getFarmer().harvestCrops();</span>
<span class="nc" id="L506">		DecimalFormat df = new DecimalFormat(&quot;#.00&quot;);</span>
<span class="nc" id="L507">		str += &quot;Score!! You have just added $&quot; + df.format(moneyEarned) + &quot; to the balance of the farm.\n&quot;</span>
<span class="nc" id="L508">				+ &quot;You now have &quot; + this.farm.getNumAvailableCrops() + &quot; available crop plots.\n\n&quot;</span>
<span class="nc" id="L509">				+ &quot;Here is the updated status of your crops:\n&quot;;</span>
<span class="nc" id="L510">		str += this.farm.getCropStatus();</span>

<span class="nc" id="L512">		this.numDayActions -= 1;</span>
<span class="nc" id="L513">		return str;</span>
	}

	/**
	 * Implements the 'tend to the farm land' action which adds to animal happiness.
	 * 
	 * @return The updated status of the animals.
	 */
	public String tendToFarmland() {
<span class="nc" id="L522">		String str = &quot;&quot;;</span>
<span class="nc" id="L523">		farm.getFarmer().tendToFarmland();</span>

		// Print updated farm and animals details
<span class="nc" id="L526">		str += &quot;That is one tidy farm! Here is your updated farm and animal status:\n\n&quot;;</span>
<span class="nc" id="L527">		str += this.farm.toString() + &quot;\n\n&quot;;</span>
<span class="nc" id="L528">		str += this.farm.getAnimalStatus();</span>

<span class="nc" id="L530">		this.numDayActions -= 1;</span>
<span class="nc" id="L531">		return str;</span>
	}

//===================================================== GENERAL STORE =====================================================

	/**
	 * Returns the balance of the farm and items currently owned by the farmer.
	 * 
	 * @return The balance of the farm and items currently owned by the farmer.
	 */
	public String displayCurrentlyOwnedItems() {
<span class="nc" id="L542">		String str = &quot;&quot;;</span>
<span class="nc" id="L543">		DecimalFormat df = new DecimalFormat(&quot;#.00&quot;);</span>
<span class="nc" id="L544">		str += &quot;Current balance: $&quot; + df.format(this.farm.getBalance()) + &quot;\n\n&quot;;</span>
<span class="nc bnc" id="L545" title="All 2 branches missed.">		if (this.farm.getFarmer().getItems().size() == 0) {</span>
<span class="nc" id="L546">			str += &quot;You currently do not own any items.&quot;;</span>
<span class="nc" id="L547">		} else {</span>
<span class="nc" id="L548">			str += &quot;You own the following items:\n&quot;;</span>
<span class="nc" id="L549">			str += this.farm.getFarmer().getItemStock();</span>
		}
<span class="nc" id="L551">		return str;</span>
	}

	/**
	 * Returns the number of available crop plots on the farm.
	 * 
	 * @return Number of available crop plots on the farm.
	 */
	public int getNumAvailableCrops() {
<span class="nc" id="L560">		return this.farm.getNumAvailableCrops();</span>
	}

	/**
	 * Processes the purchase of an animal from the store. This involves firstly
	 * withdrawing money from the farm. If this is successful the animal will be
	 * purchased and added to the farm's animal list.
	 * 
	 * @param itemId The Type ID of the animal to be sold.
	 * @return The animal if it has been successfully purchased. Otherwise it will
	 *         return null.
	 */
	public FarmItem processAnimalSale(int itemId) {
<span class="nc" id="L573">		FarmItem animal = null;</span>
<span class="nc" id="L574">		float payment = this.farm.withdrawMoney(generalStore.getItem(itemId).getPurchasePrice());</span>
		// Check withdrawal was successful
<span class="nc bnc" id="L576" title="All 2 branches missed.">		if (payment != 0) {</span>
<span class="nc" id="L577">			animal = generalStore.getItem(itemId);</span>
<span class="nc" id="L578">			this.farm.addAnimal(animal);</span>
		}
<span class="nc" id="L580">		return animal;</span>
	}

	/**
	 * Processes the purchase of a crop from the store. This involves firstly
	 * withdrawing money from the farm. If this is successful the crop will be
	 * purchased and added to the farm's crop list.
	 * 
	 * @param itemId The Type ID of the crop to be sold.
	 * @return The crop if it has been successfully purchased. Otherwise it will
	 *         return null.
	 */
	public FarmItem processCropSale(int itemId) {
<span class="nc" id="L593">		FarmItem crop = null;</span>
<span class="nc" id="L594">		float payment = this.farm.withdrawMoney(generalStore.getItem(itemId).getPurchasePrice());</span>
		// Check withdrawal was successful
<span class="nc bnc" id="L596" title="All 2 branches missed.">		if (payment != 0) {</span>
<span class="nc" id="L597">			crop = generalStore.sellItem(itemId);</span>
<span class="nc" id="L598">			this.farm.addCrop(crop);</span>
		}
<span class="nc" id="L600">		return crop;</span>
	}

	/**
	 * Processes the purchase of a farming item from the store. This involves
	 * firstly withdrawing money from the farm. If this is successful the item will
	 * be purchased and added to the farmer's list of items.
	 * 
	 * @param itemId The Type ID of the item to be sold.
	 * @return The item if it has been successfully purchased. Otherwise it will
	 *         return null.
	 */
	public FarmItem processItemSale(int itemId) {
<span class="nc" id="L613">		FarmItem item = null;</span>
<span class="nc" id="L614">		float payment = this.farm.withdrawMoney(generalStore.getItem(itemId).getPurchasePrice());</span>
		// Check withdrawal was successful
<span class="nc bnc" id="L616" title="All 2 branches missed.">		if (payment != 0) {</span>
<span class="nc" id="L617">			item = generalStore.getItem(itemId);</span>
<span class="nc" id="L618">			this.farm.getFarmer().addItem(item);</span>
		}
<span class="nc" id="L620">		return item;</span>
	}

	/**
	 * Returns the default description of an item.
	 * 
	 * @param itemId The type ID of the item to be described.
	 * @return The description of the given item.
	 */
	public String getFarmItemDescription(int itemId) {
<span class="nc" id="L630">		String str = &quot;&quot;;</span>
<span class="nc bnc" id="L631" title="All 16 branches missed.">		switch (itemId) {</span>
		case 1:
<span class="nc" id="L633">			str += Fertilizer.getTypeDescription();</span>
<span class="nc" id="L634">			break;</span>
		case 2:
<span class="nc" id="L636">			str += Compost.getTypeDescription();</span>
<span class="nc" id="L637">			break;</span>
		case 3:
<span class="nc" id="L639">			str += Hoe.getTypeDescription();</span>
<span class="nc" id="L640">			break;</span>
		case 4:
<span class="nc" id="L642">			str += Steroid.getTypeDescription();</span>
<span class="nc" id="L643">			break;</span>
		case 5:
<span class="nc" id="L645">			str += Grain.getTypeDescription();</span>
<span class="nc" id="L646">			break;</span>
		case 6:
<span class="nc" id="L648">			str += Silage.getTypeDescription();</span>
<span class="nc" id="L649">			break;</span>
		case 7:
<span class="nc" id="L651">			str += Rice.getTypeDescription();</span>
<span class="nc" id="L652">			break;</span>
		case 8:
<span class="nc" id="L654">			str += Wheat.getTypeDescription();</span>
<span class="nc" id="L655">			break;</span>
		case 9:
<span class="nc" id="L657">			str += Cotton.getTypeDescription();</span>
<span class="nc" id="L658">			break;</span>
		case 10:
<span class="nc" id="L660">			str += Coffee.getTypeDescription();</span>
<span class="nc" id="L661">			break;</span>
		case 11:
<span class="nc" id="L663">			str += Olive.getTypeDescription();</span>
<span class="nc" id="L664">			break;</span>
		case 12:
<span class="nc" id="L666">			str += Avocado.getTypeDescription();</span>
<span class="nc" id="L667">			break;</span>
		case 13:
<span class="nc" id="L669">			str += Chicken.getTypeDescription();</span>
<span class="nc" id="L670">			break;</span>
		case 14:
<span class="nc" id="L672">			str += Pig.getTypeDescription();</span>
<span class="nc" id="L673">			break;</span>
		case 15:
<span class="nc" id="L675">			str += Horse.getTypeDescription();</span>
			break;
		}
<span class="nc" id="L678">		return str;</span>
	}

	/**
	 * Returns a generic success message when any farm item is purchased.
	 * 
	 * @param item The item that has been successfully purchased.
	 * @return A success message.
	 */
	public String getSuccessMessage(FarmItem item) {
<span class="nc" id="L688">		DecimalFormat df = new DecimalFormat(&quot;#.00&quot;);</span>
<span class="nc" id="L689">		return &quot;Congratulations, &quot; + this.farm.getFarmer().getName() + &quot;!\n&quot; + &quot;Your purchase is completed&quot;</span>
<span class="nc" id="L690">				+ &quot; and your new item has been modified according to your farm type.\n\n&quot;</span>
<span class="nc" id="L691">				+ &quot;You are now the new owner of:\n&quot; + item.toString() + &quot;\n\nYour remaining balance is $&quot;</span>
<span class="nc" id="L692">				+ df.format(this.farm.getBalance());</span>
	}

	/**
	 * Returns a default error message if a purchase has been unsuccessful.
	 * 
	 * @return A default error message.
	 */
	public String getErrorMessage() {
<span class="nc" id="L701">		DecimalFormat df = new DecimalFormat(&quot;#.00&quot;);</span>
<span class="nc" id="L702">		return &quot;Oh no, it appears you cannot afford this right now.\n&quot; + &quot;Your current balance is $&quot;</span>
<span class="nc" id="L703">				+ df.format(this.farm.getBalance());</span>
	}

// ===================================================== FINAL SCORE IMPLEMENTATION =====================================================

	/**
	 * Returns the profit that has been made throughout the duration of the game.
	 * 
	 * @return The total profit made during the game.
	 */
	public float getTotalProfit() {
<span class="nc" id="L714">		return this.farm.getBalance() - this.initialBalance;</span>
	}

	/**
	 * Calculate a final score based on game duration, number of crops and animals,
	 * animal status and money earned
	 * 
	 * @return Final game score.
	 */
	public int calculateFinalScore() {
<span class="nc" id="L724">		int score = 0;</span>

		// =================== ASSESS MONEY ===================
		// Sum up monetary value of assets (money, animals, crops)
<span class="nc" id="L728">		float money = this.farm.getBalance();</span>

<span class="nc" id="L730">		ArrayList&lt;FarmItem&gt; animals = this.farm.getAnimals();</span>
<span class="nc bnc" id="L731" title="All 2 branches missed.">		for (FarmItem a : animals) {</span>
<span class="nc" id="L732">			money += a.getPurchasePrice();</span>
		}

		// Crops have not been harvested so calculate value through purchase price
<span class="nc" id="L736">		ArrayList&lt;FarmItem&gt; crops = this.farm.getCrops();</span>
<span class="nc bnc" id="L737" title="All 2 branches missed.">		for (FarmItem c : crops) {</span>
<span class="nc" id="L738">			money += c.getPurchasePrice();</span>
		}

		// 1 points for every $10 earned
<span class="nc" id="L742">		score += Math.floorDiv((int) money, 10);</span>

		// =================== ASSESS ANIMAL STATUS ===================

		// 1 point for every happiness point on an animal, 1 point for health
<span class="nc bnc" id="L747" title="All 2 branches missed.">		for (FarmItem a : animals) {</span>
<span class="nc" id="L748">			score += ((Animal) a).getHealth();</span>
<span class="nc" id="L749">			score += ((Animal) a).getHappiness();</span>
		}

		// Multiply by game duration
<span class="nc" id="L753">		score *= this.daysTotal;</span>
<span class="nc" id="L754">		return score;</span>
	}

	/**
	 * Return a string summarizing the final results for a game.
	 * 
	 * @return The final summary of the game.
	 */
	public String getFinalResults() {
<span class="nc" id="L763">		DecimalFormat df = new DecimalFormat(&quot;#.00&quot;);</span>
<span class="nc" id="L764">		return &quot;Well done, &quot; + this.farm.getFarmer().getName() + &quot;, you have made it through life as a farmer!&quot;</span>
<span class="nc" id="L765">				+ &quot;\nFarm name: &quot; + this.farm.getName() + &quot;\nGame duration: &quot; + this.getDaysTotal() + &quot; days&quot;</span>
<span class="nc" id="L766">				+ &quot;\nProfit made: $&quot; + df.format(getTotalProfit())</span>
<span class="nc" id="L767">				+ &quot;\n\nYour final score is calculated based on game duration, &quot;</span>
<span class="nc" id="L768">				+ &quot;crops and animals owned, animal status and money earned&quot;;</span>
	}

}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.5.201910111838</span>src (25/05/2020 2:19:44 PM)</div></body></html>